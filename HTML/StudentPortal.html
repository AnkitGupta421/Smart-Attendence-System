<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Student Portal</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css">

    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #f8f9fa;
        }

        .icon-bg-blue {
            background-color: #eef2ff;
        }

        .icon-bg-green {
            background-color: #e6f7f0;
        }

        .icon-bg-yellow {
            background-color: #fffbeb;
        }

        .icon-bg-purple {
            background-color: #f3eefc;
        }

        .card-hover {
            transition: all 0.3s ease;
        }

        .card-hover:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
        }

        .nav-link {
            transition: all 0.3s ease;
        }

        .nav-link:hover {
            background-color: #f3f4f6;
        }

        .nav-link.active {
            background-color: #e0e7ff;
            color: #3730a3;
        }

        .profile-card {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        }

        .stats-card {
            background: #ffffff;
            border-left: 4px solid #4f46e5;
        }

        .info-section {
            background: #f8fafc;
            border-radius: 8px;
        }

        .info-label {
            color: #64748b;
            font-weight: 500;
        }

        .info-value {
            color: #1e293b;
            font-weight: 600;
        }

        .chart-container {
            background: white;
            border-radius: 12px;
            padding: 20px;
            box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
        }

        .progress-bar {
            background-color: #e5e7eb;
            border-radius: 9999px;
            overflow: hidden;
        }

        .progress-fill {
            background: linear-gradient(90deg, #10b981, #059669);
            height: 100%;
            transition: width 0.3s ease;
        }

        .sidebar {
            background: linear-gradient(180deg, #1e293b 0%, #334155 100%);
        }

        .sidebar-link {
            color: #cbd5e1;
            transition: all 0.3s ease;
        }

        .sidebar-link:hover {
            color: #ffffff;
            background-color: rgba(255, 255, 255, 0.1);
        }

        .sidebar-link.active {
            background-color: #4f46e5;
            color: #ffffff;
        }

        .content-area {
            min-height: calc(100vh - 64px);
        }

        .attendance-badge {
            padding: 4px 12px;
            border-radius: 9999px;
            font-size: 0.75rem;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.05em;
        }

        .attendance-present {
            background-color: #dcfce7;
            color: #166534;
        }

        .attendance-absent {
            background-color: #fee2e2;
            color: #991b1b;
        }

        .attendance-late {
            background-color: #fef3c7;
            color: #92400e;
        }
    </style>
</head>

<body class="bg-gray-100">

    <!-- Header -->
    <header class="bg-white shadow-sm">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex justify-between items-center h-16">
                <div class="flex items-center space-x-3">
                    <i class="fas fa-user-check text-2xl text-indigo-600"></i>
                    <span class="text-2xl font-bold text-gray-800">Attendify</span>
                </div>

                <div class="flex items-center space-x-6">
                    <div class="flex items-center">
                        <svg class="w-6 h-6 text-gray-500 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24"
                            xmlns="http://www.w3.org/2000/svg">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"></path>
                        </svg>
                        <span class="text-gray-700 font-medium">24BSA10200</span>
                    </div>
                    <!-- Logout Button -->
                    <button id="logout-btn" class="inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md text-white bg-red-600 hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500 transition-colors duration-200">
                        <svg class="w-4 h-4 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"></path>
                        </svg>
                        Logout
                    </button>
                </div>
            </div>
        </div>
    </header>

    <!-- Main Container -->
    <div class="flex">
        <!-- Sidebar -->
        <div class="sidebar w-64 min-h-screen shadow-lg">
            <div class="p-6">
                <div class="profile-card text-white p-6 rounded-lg mb-6">
                    <div class="text-center">
                        <div class="w-16 h-16 bg-white bg-opacity-20 rounded-full flex items-center justify-center mx-auto mb-4">
                            <i class="fas fa-user text-2xl"></i>
                        </div>
                        <h3 class="text-lg font-semibold">Welcome, Ankit</h3>
                        <p class="text-sm opacity-90">24BSA10200</p>
                    </div>
                </div>

                <nav class="space-y-2">
                    <a href="#" class="sidebar-link active flex items-center px-4 py-3 rounded-lg">
                        <i class="fas fa-tachometer-alt w-5"></i>
                        <span class="ml-3">Dashboard</span>
                    </a>
                    <a href="#" class="sidebar-link flex items-center px-4 py-3 rounded-lg">
                        <i class="fas fa-user w-5"></i>
                        <span class="ml-3">Student Profile</span>
                    </a>
                    <a href="#" class="sidebar-link flex items-center px-4 py-3 rounded-lg">
                        <i class="fas fa-calendar-check w-5"></i>
                        <span class="ml-3">Attendance</span>
                    </a>
                    <a href="#" class="sidebar-link flex items-center px-4 py-3 rounded-lg">
                        <i class="fas fa-book-open w-5"></i>
                        <span class="ml-3">Courses</span>
                    </a>
                    <a href="#" class="sidebar-link flex items-center px-4 py-3 rounded-lg">
                        <i class="fas fa-chart-bar w-5"></i>
                        <span class="ml-3">Analytics</span>
                    </a>
                    <a href="#" class="sidebar-link flex items-center px-4 py-3 rounded-lg">
                        <i class="fas fa-cog w-5"></i>
                        <span class="ml-3">Settings</span>
                    </a>
                </nav>
            </div>
        </div>

        <!-- Main Content -->
        <div class="flex-1 content-area">
            <div class="p-8">
                <!-- Student Info Header -->
                <div class="mb-8">
                    <div class="bg-white rounded-lg shadow p-6">
                        <div class="flex items-center justify-between">
                            <div>
                                <h1 class="text-3xl font-bold text-gray-900">Student Portal Dashboard</h1>
                                <div class="mt-2 flex items-center space-x-4">
                                    <span class="text-xl font-semibold text-gray-700">Ankit Gupta</span>
                                    <span class="text-gray-500">•</span>
                                    <span class="text-gray-600">B.tech (Cloud Computing)• 2nd Year</span>
                                </div>
                            </div>
                            <div class="text-right">
                                <div class="text-sm text-gray-500">Student ID</div>
                                <div class="text-lg font-semibold text-gray-900">24BSA10200</div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Stats Cards -->
                <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8">
                    <div class="stats-card p-6 rounded-lg shadow">
                        <div class="flex items-center justify-between">
                            <div>
                                <p class="text-sm font-medium text-gray-600">Total Classes</p>
                                <p class="text-3xl font-bold text-gray-900">--</p>
                            </div>
                            <div class="icon-bg-blue p-3 rounded-full">
                                <i class="fas fa-calendar-alt text-indigo-600 text-xl"></i>
                            </div>
                        </div>
                    </div>

                    <div class="stats-card p-6 rounded-lg shadow">
                        <div class="flex items-center justify-between">
                            <div>
                                <p class="text-sm font-medium text-gray-600">Present</p>
                                <p class="text-3xl font-bold text-green-600">--</p>
                            </div>
                            <div class="icon-bg-green p-3 rounded-full">
                                <i class="fas fa-check-circle text-green-600 text-xl"></i>
                            </div>
                        </div>
                    </div>

                    <div class="stats-card p-6 rounded-lg shadow">
                        <div class="flex items-center justify-between">
                            <div>
                                <p class="text-sm font-medium text-gray-600">Absent</p>
                                <p class="text-3xl font-bold text-red-600">--</p>
                            </div>
                            <div class="icon-bg-yellow p-3 rounded-full">
                                <i class="fas fa-times-circle text-red-600 text-xl"></i>
                            </div>
                        </div>
                    </div>

                    <div class="stats-card p-6 rounded-lg shadow">
                        <div class="flex items-center justify-between">
                            <div>
                                <p class="text-sm font-medium text-gray-600">Attendance Rate</p>
                                <p class="text-3xl font-bold text-purple-600">--</p>
                            </div>
                            <div class="icon-bg-purple p-3 rounded-full">
                                <i class="fas fa-chart-pie text-purple-600 text-xl"></i>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Main Content Grid -->
                <div class="grid grid-cols-1 lg:grid-cols-3 gap-8">
                    <!-- Student Information -->
                    <div class="lg:col-span-2">
                        <div class="bg-white rounded-lg shadow">
                            <div class="px-6 py-4 border-b border-gray-200">
                                <h3 class="text-lg font-medium text-gray-900">Student Information</h3>
                                <p class="text-sm text-gray-600">Your personal and academic information from our records.</p>
                            </div>
                            <div class="p-6">
                                <!-- Personal Information -->
                                <div class="mb-8">
                                    <h4 class="text-md font-semibold text-gray-800 mb-4">Personal Information</h4>
                                    <div class="info-section p-4">
                                        <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                                            <div>
                                                <div class="info-label text-sm">Registration No.</div>
                                                <div class="info-value">12345</div>
                                            </div>
                                            <div>
                                                <div class="info-label text-sm">Email Address</div>
                                                <div class="info-value">alex.doe@university.edu</div>
                                            </div>
                                            <div>
                                                <div class="info-label text-sm">First Name</div>
                                                <div class="info-value">Alex</div>
                                            </div>
                                            <div>
                                                <div class="info-label text-sm">Last Name</div>
                                                <div class="info-value">Doe</div>
                                            </div>
                                            <div>
                                                <div class="info-label text-sm">Phone Number</div>
                                                <div class="info-value">+1 234-567-890</div>
                                            </div>
                                            <div>
                                                <div class="info-label text-sm">Date of Birth</div>
                                                <div class="info-value">15-08-2004</div>
                                            </div>
                                            <div class="md:col-span-2">
                                                <div class="info-label text-sm">Address</div>
                                                <div class="info-value">123 University Lane, Campus City, State 12345</div>
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                <!-- Academic Information -->
                                <div>
                                    <h4 class="text-md font-semibold text-gray-800 mb-4">Academic Information</h4>
                                    <div class="info-section p-4">
                                        <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                                            <div>
                                                <div class="info-label text-sm">Department</div>
                                                <div class="info-value">Computer Science</div>
                                            </div>
                                            <div>
                                                <div class="info-label text-sm">Academic Year</div>
                                                <div class="info-value">2nd Year</div>
                                            </div>
                                            <div>
                                                <div class="info-label text-sm">Course/Program</div>
                                                <div class="info-value">Bachelor of Technology (B.Tech)</div>
                                            </div>
                                            <div>
                                                <div class="info-label text-sm">Specialization</div>
                                                <div class="info-value">Cloud Computing</div>
                                            </div>
                                            <div>
                                                <div class="info-label text-sm">Enrollment Date</div>
                                                <div class="info-value">September 2023</div>
                                            </div>
                                            <div>
                                                <div class="info-label text-sm">Expected Graduation</div>
                                                <div class="info-value">May 2027</div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Right Sidebar with Additional Info -->
                    <div class="space-y-6">
                        <!-- Quick Stats -->
                        <div class="bg-white rounded-lg shadow p-6">
                            <h3 class="text-lg font-medium text-gray-900 mb-4">Quick Statistics</h3>
                            
                            <div class="space-y-4">
                                <div class="flex justify-between items-center">
                                    <span class="text-sm text-gray-600">Overall Attendance</span>
                                    <span class="text-sm font-semibold text-green-600">85%</span>
                                </div>
                                <div class="progress-bar h-2">
                                    <div class="progress-fill" style="width: 85%"></div>
                                </div>
                                
                                <div class="flex justify-between items-center">
                                    <span class="text-sm text-gray-600">Current Semester</span>
                                    <span class="text-sm font-semibold text-blue-600">90%</span>
                                </div>
                                <div class="progress-bar h-2">
                                    <div class="progress-fill" style="width: 90%"></div>
                                </div>
                                
                                <div class="flex justify-between items-center">
                                    <span class="text-sm text-gray-600">Course Completion</span>
                                    <span class="text-sm font-semibold text-purple-600">75%</span>
                                </div>
                                <div class="progress-bar h-2">
                                    <div class="progress-fill" style="width: 75%"></div>
                                </div>
                            </div>
                        </div>

                        <!-- Recent Activity -->
                        <div class="bg-white rounded-lg shadow p-6">
                            <h3 class="text-lg font-medium text-gray-900 mb-4">Recent Activity</h3>
                            
                            <div class="space-y-3">
                                <div class="flex items-start space-x-3">
                                    <div class="flex-shrink-0">
                                        <span class="attendance-badge attendance-present">Present</span>
                                    </div>
                                    <div class="flex-1 min-w-0">
                                        <p class="text-sm text-gray-900 font-medium">Data Structures</p>
                                        <p class="text-xs text-gray-500">Today, 9:00 AM</p>
                                    </div>
                                </div>
                                
                                <div class="flex items-start space-x-3">
                                    <div class="flex-shrink-0">
                                        <span class="attendance-badge attendance-present">Present</span>
                                    </div>
                                    <div class="flex-1 min-w-0">
                                        <p class="text-sm text-gray-900 font-medium">Cloud Computing</p>
                                        <p class="text-xs text-gray-500">Yesterday, 2:00 PM</p>
                                    </div>
                                </div>
                                
                                <div class="flex items-start space-x-3">
                                    <div class="flex-shrink-0">
                                        <span class="attendance-badge attendance-late">Late</span>
                                    </div>
                                    <div class="flex-1 min-w-0">
                                        <p class="text-sm text-gray-900 font-medium">Database Systems</p>
                                        <p class="text-xs text-gray-500">Sept 16, 11:00 AM</p>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Upcoming Classes -->
                        <div class="bg-white rounded-lg shadow p-6">
                            <h3 class="text-lg font-medium text-gray-900 mb-4">Upcoming Classes</h3>
                            
                            <div class="space-y-3">
                                <div class="border-l-4 border-blue-400 pl-3">
                                    <p class="text-sm font-medium text-gray-900">Algorithms</p>
                                    <p class="text-xs text-gray-500">Tomorrow, 10:00 AM - 11:30 AM</p>
                                    <p class="text-xs text-gray-500">Room: CS-101</p>
                                </div>
                                
                                <div class="border-l-4 border-green-400 pl-3">
                                    <p class="text-sm font-medium text-gray-900">Software Engineering</p>
                                    <p class="text-xs text-gray-500">Tomorrow, 2:00 PM - 3:30 PM</p>
                                    <p class="text-xs text-gray-500">Room: CS-205</p>
                                </div>
                                
                                <div class="border-l-4 border-purple-400 pl-3">
                                    <p class="text-sm font-medium text-gray-900">Web Development</p>
                                    <p class="text-xs text-gray-500">Friday, 9:00 AM - 10:30 AM</p>
                                    <p class="text-xs text-gray-500">Room: Lab-3</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // --- AWS Cognito Configuration ---
        const COGNITO_DOMAIN = 'https://ap-south-1gdypzg5zm.auth.ap-south-1.amazoncognito.com';
        const CLIENT_ID = '6q2v093o4igcsnc6khak9bc2vq';
        const LOGOUT_URI = 'http://localhost:8000/loginpage1.html'; // Make sure this matches your allowed sign-out URLs

        // Sidebar Navigation
        document.addEventListener('DOMContentLoaded', function() {
            const sidebarLinks = document.querySelectorAll('.sidebar-link');
            
            sidebarLinks.forEach(link => {
                link.addEventListener('click', function(e) {
                    e.preventDefault();
                    
                    // Remove active class from all links
                    sidebarLinks.forEach(l => l.classList.remove('active'));
                    
                    // Add active class to clicked link
                    this.classList.add('active');
                });
            });

            // Initialize stats animation
            animateStats();
        });

        // Stats Animation
        function animateStats() {
            const statNumbers = [
                { element: document.querySelector('.stats-card:nth-child(1) .text-3xl'), target: 45, prefix: '' },
                { element: document.querySelector('.stats-card:nth-child(2) .text-3xl'), target: 38, prefix: '' },
                { element: document.querySelector('.stats-card:nth-child(3) .text-3xl'), target: 7, prefix: '' },
                { element: document.querySelector('.stats-card:nth-child(4) .text-3xl'), target: 84, prefix: '', suffix: '%' }
            ];

            statNumbers.forEach(stat => {
                if (stat.element) {
                    animateNumber(stat.element, stat.target, stat.prefix || '', stat.suffix || '');
                }
            });
        }

        function animateNumber(element, target, prefix = '', suffix = '') {
            let current = 0;
            const increment = target / 50;
            const timer = setInterval(() => {
                current += increment;
                if (current >= target) {
                    current = target;
                    clearInterval(timer);
                }
                element.textContent = prefix + Math.floor(current) + suffix;
            }, 30);
        }

        // Profile hover effects
        const profileCard = document.querySelector('.profile-card');
        if (profileCard) {
            profileCard.addEventListener('mouseenter', function() {
                this.style.transform = 'scale(1.05)';
            });
            
            profileCard.addEventListener('mouseleave', function() {
                this.style.transform = 'scale(1)';
            });
        }

        // Progress bar animations
        function animateProgressBars() {
            const progressBars = document.querySelectorAll('.progress-fill');
            
            progressBars.forEach(bar => {
                const width = bar.style.width;
                bar.style.width = '0%';
                
                setTimeout(() => {
                    bar.style.width = width;
                }, 100);
            });
        }

        // Initialize progress bars animation
        setTimeout(animateProgressBars, 500);

        // Dynamic greeting based on time
        function updateGreeting() {
            const hour = new Date().getHours();
            let greeting = 'Welcome';
            
            if (hour < 12) {
                greeting = 'Good Morning';
            } else if (hour < 18) {
                greeting = 'Good Afternoon';
            } else {
                greeting = 'Good Evening';
            }
            
            const welcomeElement = document.querySelector('.profile-card h3');
            if (welcomeElement) {
                welcomeElement.textContent = `${greeting}, Ankit`;
            }
        }

        // Update greeting on load
        updateGreeting();

        // Card hover effects
        const cards = document.querySelectorAll('.stats-card, .chart-container');
        cards.forEach(card => {
            card.addEventListener('mouseenter', function() {
                this.style.transform = 'translateY(-4px)';
                this.style.boxShadow = '0 8px 25px rgba(0, 0, 0, 0.15)';
            });
            
            card.addEventListener('mouseleave', function() {
                this.style.transform = 'translateY(0)';
                this.style.boxShadow = '0 1px 3px rgba(0, 0, 0, 0.1)';
            });
        });

        // Notification system (placeholder)
        function showNotification(message, type = 'info') {
            // This could be expanded to show actual notifications
            console.log(`${type.toUpperCase()}: ${message}`);
        }

        // Show a welcome notification
        setTimeout(() => {
            showNotification('Welcome to your Student Portal! Check your upcoming classes in the sidebar.', 'info');
        }, 1000);

        // --- LOGOUT FUNCTIONALITY ---
        
        /**
         * Performs complete logout by:
         * 1. Clearing any local session data
         * 2. Redirecting to AWS Cognito logout endpoint
         * 3. Cognito will clear all tokens and sessions
         * 4. Redirecting back to login page where user can choose account again
         */
        function performLogout() {
            try {
                // Clear any local storage data
                localStorage.clear();
                sessionStorage.clear();
                
                // Clear any cookies (if you're storing any session data in cookies)
                document.cookie.split(";").forEach(function(c) { 
                    document.cookie = c.replace(/^ +/, "").replace(/=.*/, "=;expires=" + new Date().toUTCString() + ";path=/"); 
                });
                
                // Build the Cognito logout URL
                // This will:
                // - Sign out the user from Cognito
                // - Invalidate all access, refresh, and ID tokens
                // - Clear the Cognito session
                // - Redirect to the specified logout_uri (login page)
                const logoutUrl = `${COGNITO_DOMAIN}/logout?client_id=${CLIENT_ID}&logout_uri=${encodeURIComponent(LOGOUT_URI)}`;
                
                // Redirect to Cognito logout endpoint
                // This ensures complete logout including clearing Google OAuth session
                window.location.href = logoutUrl;
                
            } catch (error) {
                console.error('Logout error:', error);
                // Fallback: redirect to login page even if there's an error
                window.location.href = LOGOUT_URI;
            }
        }
        
        // Add event listener to logout button
        document.getElementById('logout-btn').addEventListener('click', function(e) {
            e.preventDefault();
            
            // Optional: Show confirmation dialog
            if (confirm('Are you sure you want to logout?')) {
                performLogout();
            }
        });

    </script>

</body>

</html>